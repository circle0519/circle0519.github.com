---
layout: post
title: Samba配置 
description: 学习配置Samba
date: '2014-08-05 12:00:00'
categories: ['Linux']
tags: [Linux, Samba, 共享]
---

###Samba简介###
<img src="/images/samba.png" alt="Samba" align="middle"/>   
Samba是在Linux和UNIX系统上实现SMB协议的一个免费软件，<!--more-->由服务器及客户端程序构成([百度百科](http://baike.baidu.com/view/23872.htm?fr=aladdin.Samba)),是应用于局域网中，跨平台打印与文件共享的一种通信协议。

在计算机网络早期，FTP一般用来文件共享。但在FTP协议中，客户端不能直接对文件进行修改，必须要下载到本地。因此，客户端必须要保留文件的副本信息。另外，当同一个文件被多个用户同时更改时，上传后就会出现冲突。因此，FTP一般适用于文件的分享，用来提供对某些文档的下载服务。用户通过客户机访问Samba服务器时，如果用户对该目录下的文件具有写的权限，用户可以直接更改相应的文件，然后保存即可。如果同时有多个用户对某一个文件读写，系统需要需要对该文件锁定，等待锁释放之后其他用户再读写该文件。
###Samba应用环境###
Samba一般用来在局域网多平台文件共享和打印服务(Linux,Windows)共享的应用环境之中。Samba一般适用于局域网，在其他应用环境中不使用。如果在局域网中只有Linux主机的应用环境，我们可以直接配置NFS来满足实际需求，而且更适合;如果只有Windows的主机环境，可以使用网上邻居对某些文件设定共享权限，操作更加简便易行。
###Samba配置
在装完Samba之后，经过简单配置就可以使用。
<pre class="prettyprint">
 [global]
	workgroup = C213
    netbios name = C213Server
    server string = Samba Sever version %v
	;printcap name = /etc/printcap
	;load printers = yes
	log file = /var/log/samba/%m.log
	max log size = 50
	security = user
    dns proxy = no
[homes]
    comment = Home Directories
    browseable = no
    writable = no
</pre>
Samba一般的应用环境就是在Linux与Windows系统之间文件共享和打印共享。上面的配置是在Linux中，在Windows中查看Samba共享文件夹还需要一些其他配置。
从配置security=user，我们需要添加Samba用户。Samba用户首先需要在/etc/passwd文件中存在，下面以用户huang为例来说明。
<pre class="prettyprint">
##用户huang已经在/etc/passwd文件中,向Samba中添加用户
sudo smbpasswd -a huang 
会提示输入用户口令密码  
##启动Samba服务
sudo smbd 
sudo nmbd 
##停止Samba服务 
sudo killall smbd 
sudo killall nmbd 
</pre>
在Windows端，点击桌面上的网络或者在资源管理器中输入192.168.4.53(目标服务器的IP地址)，然后输入huang和密码即可登录。
上面的就是最简单的Samba服务器配置成功了。如果是在比较简单的环境里面，这已经足够了，就像在小实验室或者办公室，配置一个Samba服务器用来分享文件还是很方便的，比起QQ发送文件一点都不逊色。如果Windows系统是Vista或Vista之后的操作系统，需要修改一下系统本地的安全策略，否则极有可能出现不能访问正常的分享目录，这个在后续的Samba配置记录中会涉及到。
